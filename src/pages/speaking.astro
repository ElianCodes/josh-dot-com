---
import { getCollection } from "astro:content";

import { Anchor } from "../components/Anchor";
import BodyContents from "../components/BodyContents.astro";
import HeroTertiary from "../components/HeroTertiary.astro";
import { SpeakingsGrouped } from "../components/SpeakingsGrouped";
import BaseLayout from "../layouts/BaseLayout.astro";

const allSpeakings = await getCollection("speaking");

const now = Date.now();

const previous = allSpeakings
	.filter(speaking => +speaking.data.date < now)
	.sort((a, b) => +b.data.date - +a.data.date);

const upcoming = allSpeakings
	.filter(speaking => +speaking.data.date > now)
	.sort((a, b) => +a.data.date - +b.data.date);
---

<BaseLayout
	description="I talk about static analysis, accessibility, and team culture."
	primary="Speaking"
	secondary="I talk about static analysis, accessibility, and team culture."
	title="Speaking"
>
	<HeroTertiary slot="tertiary">
		Want me to speak at your event? Hooray!
		<br />
		Please see my <Anchor
			href="https://github.com/JoshuaKGoldberg/speaker-rider"
			target="_blank"
		>
			speaker rider
		</Anchor>.
	</HeroTertiary>
	<BodyContents>
		<SpeakingsGrouped
			previous={previous}
			upcoming={upcoming}
		/>
	</BodyContents>
</BaseLayout>
