---
import "@fontsource/league-spartan/variable.css";

import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import MainArea from "../components/MainArea.astro";

/**
 * @todo Merge usage of Hero into this component (instead of individual pages).
 */
export interface Props {
	class?: string | undefined;
	description: string;
	image: string;
	title?: string;
}

const { class: className, description, image: imageRaw, title: titleRaw } = Astro.props;
const image = new URL(imageRaw, Astro.site);
const title = titleRaw ? `JG | ${titleRaw}` : "Josh Goldberg";
const keywords = [
	"accessibility",
	"developer",
	"javascript",
	"josh goldberg",
	"open source",
	"performance",
	"react",
	"typescript",
	"web",
];

const metaPairs = [
	{
		content: description,
		name: `description`,
	},
	{
		content: keywords.join(),
		name: `keywords`,
	},
	{
		content: title,
		property: `og:title`,
	},
	{
		content: description,
		property: `og:description`,
	},
	{
		content: image,
		property: `og:image`,
	},
	{
		content: `website`,
		property: `og:type`,
	},
	{
		content: Astro.url,
		property: `og:url`,
	},
	{
		content: image,
		name: `thumbnail`,
	},
	{
		content: `summary`,
		name: `twitter:card`,
	},
	{
		content: Astro.site,
		name: `twitter:domain`,
	},
	{
		content: "Josh Goldberg",
		name: `twitter:creator`,
	},
	{
		content: image,
		name: `twitter:image`,
	},
	{
		content: `@JoshuaKGoldberg`,
		name: `twitter:site`,
	},
	{
		content: title,
		name: `twitter:title`,
	},
	{
		content: description,
		name: `twitter:description`,
	},
];
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link
			href="/favicon-dark.svg"
			media="(prefers-color-scheme: dark)"
			rel="icon"
			type="image/svg+xml"
		/>
		<link
			href="/favicon.svg"
			media="(prefers-color-scheme: light)"
			rel="icon"
			type="image/svg+xml"
		/>
		{metaPairs.map((meta) => <meta {...meta} />)}
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords.join()} />
		<meta name="generator" content={Astro.generator} />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
	</head>
	<MainArea as="body" class={className}>
		<Header />
		<main>
			<slot />
		</main>
		<Footer />
	</MainArea>

	<style is:global>
		@import "./normalize.css";
		@import "./base.css";
	</style>
</html>
