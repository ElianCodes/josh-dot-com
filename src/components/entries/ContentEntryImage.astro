---
import clsx from "clsx";
import { Image } from "astro:assets";
import styles from "./ContentEntryImage.module.css";

const variants = {
	round: styles.round,
	square: styles.square,
};

export type ContentEntryImageVariant = keyof typeof variants;

export interface Props {
	alt: string;
	src: any;
	variant: ContentEntryImageVariant;
}

const props = Astro.props;
---

{
	typeof props.src === "string" ? (
		<img
			alt={props.alt}
			class={clsx(
				styles.contentEntryImage,
				variants[props.variant],
				styles.contentEntryImageLoaded,
			)}
			loading="lazy"
			src={props.src}
		/>
	) : (
		<Image
			alt={props.alt}
			class={clsx(
				styles.contentEntryImage,
				variants[props.variant],
				styles.contentEntryImageLoaded,
			)}
			loading="lazy"
			src={props.src}
			inferSize
		/>
	)
}
